<!DOCTYPE html>
<html>
<body>

<h1>Hello Andrew</h1>

<p id="demo">This first version will change the background colour between red, yellow and green</p>

<script>

async function drawShape(colour, shape) {

	// getting a reference to our HTML element
	const canvas = document.querySelector('canvas')

	// initiating 2D context on it
	const c = canvas.getContext('2d')

	addEventListener('resize', () => {
	  canvas.width = innerWidth
	  canvas.height = innerHeight
	})

	c.strokeStyle = 'white'
	c.fillStyle = colour
	const centerX = canvas.width / 2;
	const centerY = canvas.height / 2;

	if (shape == 'rectangle') {
		c.rect(centerX, centerY, 150, 100)
	}

	if (shape == 'circle') {
		const centerX = canvas.width / 2;
		const centerY = canvas.height / 2;
		const radius = 70;

		c.beginPath();
		c.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);
	}

	c.stroke()
	c.fill()
}

async function sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
}

async function myFunction() {
	console.log('Starting!')
	let milli_in_seconds = 1000
	let minimum_delay = 3
	let maximum_added_delay = 3

	//const colours = ["red", "white", "black", "oraange", "green", "yellow", "pink", "purple", "blue", "gray"]

	const colours = []

	let cb = document.querySelector('#box_red')
	if (cb.checked == true) {colours.push('red')}

	cb = document.querySelector('#box_white')
	if (cb.checked == true) {colours.push('white')}

	cb = document.querySelector('#box_black')
	if (cb.checked == true) {colours.push('black')}

	cb = document.querySelector('#box_orange')
	if (cb.checked == true) {colours.push('orange')}

	cb = document.querySelector('#box_green')
	if (cb.checked == true) {colours.push('green')}

	cb = document.querySelector('#box_yellow')
	if (cb.checked == true) {colours.push('yellow')}

	cb = document.querySelector('#box_pink')
	if (cb.checked == true) {colours.push('pink')}

	cb = document.querySelector('#box_purple')
	if (cb.checked == true) {colours.push('purple')}

	cb = document.querySelector('#box_blue')
	if (cb.checked == true) {colours.push('blue')}

	cb = document.querySelector('#box_gray')
	if (cb.checked == true) {colours.push('gray')}

	let delay = Math.random() * maximum_added_delay
	console.log('delay = ' + (delay + minimum_delay))

	let colour = Math.floor(Math.random() * colours.length)

	let current_colour = 0

	current_colour = colours.indexOf(document.body.style.backgroundColor)

	if (current_colour === undefined || current_colour == -1) {current_colour = 0}
	
	let selection_number = (current_colour + colour) % colours.length

	let selection = colours[selection_number]

	console.log('choosing = ' + selection)

	await sleep(minimum_delay * milli_in_seconds + (milli_in_seconds * delay));

	cb = document.querySelector('#box_rectangle')
	if (cb.checked == true) {drawShape(selection, 'rectangle')}
	else {drawShape(selection, 'circle')}

	

	console.log('Done')
}

async function myFunction2() {
	console.log('Starting!')
	document.body.style.backgroundColor = "white";
	console.log('Done')
}
</script>

<button type="button" onclick="myFunction()">Begin!</button>
<button type="button" onclick="myFunction2()">Reset!</button>
<br></br>
<input type="checkbox" id="box_red"> Red 
<input type="checkbox" id="box_white"> White 
<input type="checkbox" id="box_black"> Black 
<input type="checkbox" id="box_orange"> Orange 
<input type="checkbox" id="box_green"> Green 
<input type="checkbox" id="box_yellow"> Yellow 
<input type="checkbox" id="box_pink"> Pink 
<input type="checkbox" id="box_purple"> Purple 
<input type="checkbox" id="box_blue"> Blue 
<input type="checkbox" id="box_gray"> Gray 
<br></br>

<input type="checkbox" id="box_rectangle"> Rectangle 
<input type="checkbox" id="box_circle"> Circle 


<canvas></canvas>

</body>
</html>

